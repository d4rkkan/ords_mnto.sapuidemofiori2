sap.ui.define(["cbc/co/simulador_costos/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/m/MessageToast","sap/ui/core/EventBus","sap/m/MessageBox"],function(o,e,t,a,r,i){"use strict";var s=o.extend("cbc.co.simulador_costos.controller.Utilities.FormuladoraMaterial",{onInit:function(){var o=this.getOwnerComponent().getRouter().getRoute("rtChFormuladoraMaterial");o.attachPatternMatched(this.onMyRoutePatternMatched,this);var e=sap.ui.getCore().getEventBus();e.subscribe("GridAdminFormuladoraChannel","onNavigateEvent",this.onDataReceived,this)},onMyRoutePatternMatched:function(o){this.oIdMaterial=o.getParameter("arguments").oIdMaterial;this.oSociedad=o.getParameter("arguments").oSociedad;this.oCentro=o.getParameter("arguments").oCentro;this.oYear=o.getParameter("arguments").oYear;this.oMes=o.getParameter("arguments").oMes;this.oIdFormula=o.getParameter("arguments").oIdFormula;this.oTxtFormula=o.getParameter("arguments").oTxt;this.oTxtFormula=decodeURIComponent(this.oTxtFormula);if(this.oTxtFormula==="0"){this.oTxtFormula=""}var t="Id Material:"+this.oIdMaterial+" - Sociedad:"+this.oSociedad+" - Centro:"+this.oCentro+" - AÃ±o:"+this.oYear+" - Mes:"+this.oMes;var a=new e;var r={expression:this.oTxtFormula,title:t,showToolbar:false,variables:[{key:"PrecioProductivo",label:"Precio Productivo"},{key:"CostoConversion",label:"Costo Conversion"},{key:"CostoEnvio",label:"Costo Envio"},{key:"CostoMaterial",label:"Costo Material"}]};a.setData(r);this.getView().setModel(a);this._oBuilder=this.getView().byId("builder");this._oModelSettings=new e({expression:this.oTxtFormula,layoutType:"VisualOnly",showInputToolbar:false,allowComparison:false,allowComparisonOperators:false,allowLogical:false,readOnly:false});this.getView().setModel(this._oModelSettings,"settings");this._oBuilder.setShowInputToolbar(true)},onDataReceived:function(o,e,t){this.oIdCommoditie=t.oIdCommoditie;this.oIdFormula=t.oIdFormula;this.oTxtFormula=t.oTxtFormula;var a=new sap.ui.model.json.JSONModel(t);var r="Id Commoditie:"+this.oIdCommoditie;var i=this.getView().byId("builder");this.getOwnerComponent().setModel(a,"Formuladora")},onToPage1:function(o){var e=t.getInstance().getPreviousHash();if(e!==undefined){window.history.go(-1)}else{this.getOwnerComponent().getRouter().navTo("rtChCommodities",null,true)}}});return s});