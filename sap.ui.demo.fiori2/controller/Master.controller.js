sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/demo/fiori2/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/m/MessageBox","sap/f/library"],function(e,t,o,s,r,i,n){"use strict";var a=this;return t.extend("sap.ui.demo.fiori2.controller.Master",{onInit:function(){this.oView=this.getView();this._bDescendingSort=false;this.oProductsTable=this.oView.byId("productsTable");this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("master").attachPatternMatched(this._onOrderMatched,this)},_onOrderMatched:function(){var e=this.getView();e.setBusy(true);var t=this.getOwnerComponent().getModel("ModelOrdenes");var o=t.sServiceUrl;var s=new sap.ui.model.odata.ODataModel(o,true);var r="/OrdenesSet";var n=this.fnReadEntity(s,r);if(n.tipo==="S"){this.oDataDetalleOrders=n.datos.results}else{i.error(n.msjs,null,"Mensaje del sistema","OK",null)}var a="";if(!a){a={lstItemsOrders:[]}}a.lstItemsOrders=this.oDataDetalleOrders;var d=this.byId("ordersTable");var l=new sap.ui.model.json.JSONModel(a);d.setModel(l);e.setBusy(false)},onSearch:function(e){var t=[],r=e.getParameter("query");if(r&&r.length>0){t=[new o("Name",s.Contains,r)]}this.oProductsTable.getBinding("items").filter(t,"Application")},onAdd:function(){i.information("This functionality is not ready yet.",{title:"Aw, Snap!"})},onSort:function(){this._bDescendingSort=!this._bDescendingSort;var e=this.oProductsTable.getBinding("items"),t=new r("Name",this._bDescendingSort);e.sort(t)},onListItemPress:function(e){var t=e.getSource();var o=sap.ui.core.UIComponent.getRouterFor(this);var s=e.getSource().getBindingContext().getPath(),r=s.split("/").slice(-1).pop(),i=e.getSource().getBindingContext().getModel().getData().lstItemsOrders[r].IdOrden;o.navTo("detail",{layout:n.LayoutType.TwoColumnsMidExpanded,orden:i})}})});